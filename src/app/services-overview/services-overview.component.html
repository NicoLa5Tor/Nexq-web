<section class="services-section" [ngClass]="{'services-detail-view': mostrarServicio()}">
  <!-- Nodos neurales (solo visibles en vista detallada) -->
  <app-particles-background 
    [opacity]="0.3"
    [particleColors]="particleColors"
    [particleDensity]="mostrarServicio() ? 12000 : 8000"
    [maxConnectDistance]="120"
    [particleSpeed]="0.6"
  ></app-particles-background>
 

  <div *ngIf="mostrarServicio()" class="neural-nodes-container">
    <div class="neural-node" *ngFor="let i of [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]"></div>
  </div>

  <svg *ngIf="mostrarServicio()" class="data-flow-svg" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
    <line class="data-flow-line" x1="10%" y1="30%" x2="30%" y2="70%" stroke="rgba(94, 137, 176, 0.15)"></line>
    <line class="data-flow-line" x1="30%" y1="70%" x2="50%" y2="20%" stroke="rgba(94, 137, 176, 0.15)"></line>
    <line class="data-flow-line" x1="50%" y1="20%" x2="70%" y2="60%" stroke="rgba(94, 137, 176, 0.15)"></line>
    <line class="data-flow-line" x1="70%" y1="60%" x2="90%" y2="40%" stroke="rgba(94, 137, 176, 0.15)"></line>
  </svg>
  
  <div class="section-container">
    <!-- Título con referencia para la animación letra por letra -->
    <h2 class="section-title" #titleContainer></h2>
    
    <p class="section-subtitle fade-in delay-1">
      <span *ngIf="!mostrarServicio()">Soluciones inteligentes para desafíos empresariales modernos</span>
      <span *ngIf="mostrarServicio()">Tecnología inteligente al servicio de tu negocio</span>
    </p>

    <div class="services-grid" [ngClass]="{'expanded-grid': mostrarServicio()}">
      <!-- Servicio 1: Análisis Avanzado de Datos -->
      <div class="service-card fade-in delay-2" [ngClass]="{'detail-card': mostrarServicio()}" data-aos="zoom-in">
        <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
            <path d="M22 12A10 10 0 0 0 12 2v10z"></path>
          </svg>
        </div>
        <h3 class="service-title">Análisis Avanzado de Datos</h3>
        <div class="service-features">
          <p>• Minería de datos y reportes ejecutivos</p>
          <p>• Modelos de machine learning personalizados</p>
          <p>• Evaluación de riesgos con modelos predictivos</p>
        </div>
        <a class="service-link" routerLink="/servicios" (click)="returnToView()" *ngIf="!mostrarServicio()">
          <span>Ver más</span>
        </a>
        <button class="service-action-button" *ngIf="mostrarServicio()">Agendar demostración</button>
      </div>
      
      <!-- Servicio 2: Soluciones basadas en IA -->
      <div class="service-card fade-in delay-2" [ngClass]="{'detail-card': mostrarServicio()}" data-aos="zoom-in">
        <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"></path>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
            <line x1="12" y1="19" x2="12" y2="22"></line>
            <line x1="8" y1="22" x2="16" y2="22"></line>
          </svg>
        </div>
        <h3 class="service-title">Soluciones Basadas en IA</h3>
        <div class="service-features">
          <p>• Automatización de procesos empresariales</p>
          <p>• Asistentes virtuales y bots inteligentes</p>
          <p>• Optimización de operaciones logísticas</p>
        </div>
        <a class="service-link" routerLink="/servicios" (click)="returnToView()" *ngIf="!mostrarServicio()">
          <span>Ver más</span>
        </a>
        <button class="service-action-button" *ngIf="mostrarServicio()">Agendar demostración</button>
      </div>
      
      <!-- Servicio 3: Big Data y Visualización -->
      <div class="service-card fade-in delay-3" [ngClass]="{'detail-card': mostrarServicio()}" data-aos="zoom-in">
        <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="3" y1="9" x2="21" y2="9"></line>
            <line x1="9" y1="21" x2="9" y2="9"></line>
          </svg>
        </div>
        <h3 class="service-title">Big Data y Visualización</h3>
        <div class="service-features">
          <p>• Diseño de bases de datos escalables</p>
          <p>• Integración con Power BI y Tableau</p>
          <p>• Visualización avanzada de hallazgos clave</p>
        </div>
        <a class="service-link" routerLink="/servicios" (click)="returnToView()" *ngIf="!mostrarServicio()">
          <span>Ver más</span>
        </a>
        <button class="service-action-button" *ngIf="mostrarServicio()">Agendar demostración</button>
      </div>
      
      <!-- Servicio 4: Desarrollo de Software - Solo visible cuando mostrarServicio es true -->
      <div class="service-card fade-in delay-3 detail-card" *ngIf="mostrarServicio()" data-aos="zoom-in">
        <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="16 18 22 12 16 6"></polyline>
            <polyline points="8 6 2 12 8 18"></polyline>
          </svg>
        </div>
        <h3 class="service-title">Desarrollo de Software</h3>
        <div class="service-features">
          <p>• Aplicaciones web y móviles personalizadas</p>
          <p>• Soluciones en computación avanzada</p>
          <p>• Sistemas automatizados para gestión</p>
        </div>
        <button class="service-action-button">Agendar demostración</button>
      </div>
      
      <!-- Servicio 5: Investigación y Desarrollo - Solo visible cuando mostrarServicio es true -->
      <div class="service-card fade-in delay-4 detail-card" *ngIf="mostrarServicio()" data-aos="zoom-in">
        <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
          </svg>
        </div>
        <h3 class="service-title">Investigación y Desarrollo</h3>
        <div class="service-features">
          <p>• Algoritmos de optimización sectorial</p>
          <p>• Proyectos experimentales en IA</p>
          <p>• Colaboraciones con academia e industria</p>
        </div>
        <button class="service-action-button">Agendar demostración</button>
      </div>
      
      <!-- Servicio 6: Finanzas y Economía - Solo visible cuando mostrarServicio es true -->
      <div class="service-card fade-in delay-4 detail-card" *ngIf="mostrarServicio()" data-aos="zoom-in">
        <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <h3 class="service-title">Servicios Financieros</h3>
        <div class="service-features">
          <p>• Gestión de riesgos de mercado y crédito</p>
          <p>• Optimización de inversiones</p>
          <p>• Análisis actuarial y valoración de activos</p>
        </div>
        <button class="service-action-button">Agendar demostración</button>
      </div>
    </div>
    
    <!-- CTA Container - Versión diferente según el estado -->
    <div class="cta-container fade-in delay-4" *ngIf="!mostrarServicio()">
      <h3 class="cta-title">¿Necesitas una solución personalizada?</h3>
      <p class="cta-text">Contáctanos para recibir asesoría especializada para tu empresa</p>
      <button class="cta-button" routerLink="/servicios" (click)="returnToView()">Ver todos los servicios</button>
    </div>
    
    <!-- CTA Container alternativo cuando se muestran todos los servicios -->
    <!-- Modificaciones para el CTA en la vista de servicios detallada -->

<!-- Reemplazar el CTA expandido con esta versión corregida -->
  <div class="cta-container expanded-cta" *ngIf="mostrarServicio()">
    <div class="cta-background-element"></div>
    <h3 class="cta-title">Tecnología de punta al servicio de tu negocio</h3>
    <p class="cta-text">Nuestro equipo de expertos está listo para asesorarte y encontrar la mejor solución a tus necesidades</p>
    <!-- Importante: Quitar la clase fade-in de los botones -->
    <div class="cta-buttons-group">
      <button class="cta-button primary">Agendar consultoría</button>
      <button class="cta-button secondary" (click)="returnToView()">Volver a vista principal</button>
    </div>
  </div>
  </div>
</section>
